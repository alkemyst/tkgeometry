// Standard rphi module 10x10
// GBT at the end of the rod

// Formula A(nxm)(p-1) + B(nxm) + C(p-1) + D
// Material A B C D
// Final label: L = Local material, E = service Exiting the detector

// Module type
type = rphi

// Default sensor:
nStripsAcross = 1024;
nSegments = 2;

// Modules

// Sensor
comp = Sensor
M SenSi 0 0 0 0.2 mm L ;

// Hybrid
comp = Hybrid
M G10 0 1.18 g 0 0 L ;
M Cu 0 1.35 g 0 0 L ;

// NaIS 0.097 Cu 0.197 PE a 16 pin pair
// Four pairs
comp = NaIS
M Cu 0 0.4 0 0 L ;
M G10 0 0.8 0 0 L ;

// ASICs
comp = ASICs
M Si 0 0.04 g 0 0 L ;

// Support strip
comp = Support strip
M CF 0 2.74 g 0 0 L ;

// Cooling blocks
comp = Cooling blocks
M Al 0 4.53 g 0 0 L ;

// DC/DC converters
comp = DC/DC
// Converter PCB 1 / 2 hybrids
M G10 0 0.45 g 0 0 L ;
M Cu 0 0.11 g 0 0 L ;
// Coil / 2 hybrids
M Cu 0 0.19 g 0 0 L ;
M Al 0 1.14 g 0 0 L ;

// All services below calculated over 100 mm length = 1 module

// e-port(320Mbps) + i2c
// 2 TWP/hybrid
comp = Twisted pairs
M Cu_twp 0.066 g 0 0 0 E;
M PE_twp 0.04 g 0 0 0 E;
M Al_twp 0.066 g 0 0 0 E;

// 6 TWP/rods
// (4 for sensors and 2 for converters)
M Cu 0 0 0 0.198 g E;
M PE 0 0 0 0.12 g E;
M Al 0 0 0 0.198 g E;

// Power for the converter (10V)
// 2 wires/2 hybrids
comp = Power lines
M Cu_MV 0.118 g 0 0 0 E;
M PE 0.096 g 0 0 0 E;

// HV
// 1 wire/module
comp = HV lines
M Cu_HV 0 0 0.118 g 0 E;
M PE 0 0 0.096 g 0 E;

//Cooling
comp = Cooling
M Steel 0 0 0 0.79 g E;
M CO2 0 0 0 0.18 g E;

//Mechanics
comp = Mechanics
M CF 0 0 0 7.62 g L;
M PE 0 0 0 0.58 g L;
// Standard stereo module 10x10
// (additional material)
// GBT at the end of the rod

// Formula A(nxm)(p-1) + B(nxm) + C(p-1) + D
// Material A B C D
// Final label: L = Local material, E = service Exiting the detector

type = stereo

// Modules

// Sensor
comp = Sensor
M SenSi 0 0 0 0.2 mm L ;

// Hybrid
comp = Hybrid
M G10 0 1.18 g 0 0 L ;
M Cu 0 1.35 g 0 0 L ;

// NaIS 0.097 Cu 0.197 PE a 16 pin pair
// Four pairs
comp = NaIS
M Cu 0 0.4 0 0 L ;
M G10 0 0.8 0 0 L ;

// ASICs
comp = ASICs
M Si 0 0.04 g 0 0 L ;

// Support strip
comp = Support strip
M CF 0 2.74 g 0 0 L ;

comp = DC/DC
// Converter PCB 1 / 2 hybrids
M G10 0 0.45 g 0 0 L ;
M Cu 0 0.11 g 0 0 L ;
// Coil / 2 hybrids
M Cu 0 0.19 g 0 0 L ;
M Al 0 1.14 g 0 0 L ;

// All services below calculated over 100 mm length = 1 module

// e-port(320Mbps) + i2c
// 2 TWP/hybrid
comp = Twisted pairs
M Cu_twp 0.066 g 0 0 0 E;
M PE_twp 0.04 g 0 0 0 E;
M Al_twp 0.066 g 0 0 0 E;

// Power for the converter (10V)
// 2 wires/2 hybrids
comp = Power lines
M Cu_MV 0.118 g 0 0 0 E;
M PE 0.096 g 0 0 0 E;

// Services for the standard rods
// (scales with respective material)

// Formula A(nxm)(p-1) + B(nxm) + C(p-1) + D
// Material A B C D
// Final label: L = Local material, E = service Exiting the detector

// SERVICES

// HV, MV, LV
// Wires and cables one-to-one
D 1 g Cu 10 g/m Cu E;
D 1 g Cu_MV 10 g/m Cu E;
D 1 g Cu_HV 10 g/m Cu E;
D 1 g PE 10 g/m PE E;
D 1 g Al 10 g/m Al E; 

// Manifolds + radial pipes
D 0.79 g Steel 4.2 g Steel L;
D 0.18 g CO2 1.4 g CO2 L;
D 0.79 g Steel 17.2 g/m Steel E;
D 0.18 g CO2 3.7 g/m CO2 E;

// Holders
D 0.79 g Steel 7.4 g Al L;

// 3 GBTs per rod
// 1.452 g Cu_twp = 1 rod SS with 2 hybrids / module
D 1.452 g Cu_twp 8.19 g G10 L; // GBT's PCB
D 1.452 g Cu_twp 1.65 g Cu L;  // GBT's PCB
D 1.452 g Cu_twp 8.25 g PE L; // Packaging
D 1.452 g Cu_twp 1.14 g Cu L; // 3 Coils (DC/DC)
D 1.452 g Cu_twp 6.81 g Al L; // Cooling
D 1.452 g Cu_twp 0.72 g Cu L; // Data NaIS 
D 1.452 g Cu_twp 1.14 g PE L; // Data NaIS
D 1.452 g Cu_twp 1.47 g Cu L; // LV NaIS
D 1.452 g Cu_twp 2.19 g PE L; // LV NaIS

// 2 x (25-pin Binders):
// 1.3 g Cu_HV g  = 1 rod
// 5.2 g Cu_MV g  = 1 rod
D 1.3 g Cu_HV 2.20 g Cu L; // HV
D 1.3 g Cu_HV 1.93 g PE L;
D 5.2 g Cu_MV 2.20 g Cu L; // MV
D 5.2 g Cu_MV 1.93 g PE L;

// 6 fibers / 3 GBT (see above)
D 1.452 g Cu_twp 4.5 g/m PE E;

// GBT power - 6 wires/ 3 GBT
D 1.452 g Cu_twp 7.08 g/m Cu E;
D 1.452 g Cu_twp 5.76 g/m PE E;

// Supports: V=barrel cylinders
// X=barrel, Y=endcap, Z=Outer cylinder, W=user-defined
W CF 2.70 mm ;
X CF 2.70 mm ;
V CF 1.02 mm ;
V PE 0.17 mm ;

Y CF 1.02 mm ;
Y PE 0.17 mm ;
Z CF 2.0 mm ; // to be adjusted

//Material 0 (material, mass): (Cu_twp, 2.904)
//Material 1 (material, mass): (PE_twp, 1.76)
//Material 2 (material, mass): (Al_twp, 3.864)
//Material 3 (material, mass): (Cu, 6.622)
//Material 4 (material, mass): (PE, 5.36)
//Material 5 (material, mass): (Al, 1.092)
//Material 6 (material, mass): (Steel, 0.79)
//Material 7 (material, mass): (CO2, 0.18)

//Material 0 (material, mass): (Cu_twp, 1.452)
//Material 1 (material, mass): (PE_twp, 0.88)
//Material 2 (material, mass): (Al_twp, 1.932)
//Material 3 (material, mass): (Cu, 4.026)
//Material 4 (material, mass): (PE, 3.248)
//Material 5 (material, mass): (Al, 0.612)
//Material 6 (material, mass): (Steel, 0.79)
//Material 7 (material, mass): (CO2, 0.18)

// pt module 5x5 for the inner region
// GBT on the module

// Formula A(nxm)(p-1) + B(nxm) + C(p-1) + D
// Material A B C D
// Final label: L = Local material, E = service Exiting the detector

// Module type
type = ptIn

// Default sensor:
nStripsAcross = 480;
nSegments = 24;

// Sensor
comp = Sensor
M SenSi 0 0 0 0.4 mm L ;

// Substrates
comp = Substrates
M G10 0 0 0 1.2 mm L ;
M Cu 0 0 0 0.12 mm L ;

// Cooling
comp = Cooling
M CF 0 0 0 1.2 mm L;

// Cooling blocks
// 48mm^2 * 4.8 cm
comp = Cooling blocks
M Al 0 0 0 6.22 g L;

// Trigger GBTs (1 in 5x5)
comp = GBTs
//M G10 0 0 0 2.73 g L; // PCB removed
//M Cu 0 0 0 0.55 g L;  // PCB removed
M PE 0 0 0 2.75 g L;    // Packaging
M Cu 0 0 0 0.38 g L;    // 1 Coil
//M Al 0 0 0 9.08 g L ; // Cooling removed

// Fibers 
comp = Fibers
M PE 0 0 0.15 g 0 E;

//DC-DC converters (4 per 10x10)
//M G10 0 0 0 3.64 g L ; leave only coil
//M Cu 0 0 0 0.88 g L ;
// 2 Coils (module+GBT)
comp = DC/DC
M Cu 0 0 0 0.76 g L ;

// 6 TWP/rods
// (4 for sensors and 2 for converters)
// Divided by 2 due to length=5cm
comp = Twisted pairs
M Cu 0 0 0 0.099 g E;
M PE 0 0 0 0.06 g E;
M Al 0 0 0 0.099 g E;

// LV 2 wires / module
// Divided by 2 due to length=5cm
comp = Power lines
M Cu 0 0 0.118 g 0 E;
M PE 0 0 0.096 g 0 E;

// HV 1 wires/module
// Divided by 2 due to length=5cm
comp = HV lines
M Cu 0 0 0.059 g 0 E;
M PE 0 0 0.048 g 0 E;

//Cooling
// Divided by 2 due to length=5cm
comp = Cooling
M Steel 0 0 0 0.40 E;
M CO2   0 0 0 0.09 g E;

//Mechanics
comp = Mechanics
M CF 0 0 0 1.40 g L;
M Al 0 0 0 0.15 g L;

// I acknowledge that there are
// no GBTs at the end of the rod
comp = Twisted pairs
M Cu_twp 0 0 0 0 E;

// pt module 10x10 for the outer region
// GBT on the module

// Formula A(nxm)(p-1) + B(nxm) + C(p-1) + D
// Material A B C D
// Final label: L = Local material, E = service Exiting the detector

// Module type
type = ptOut

// Default sensor:
nStripsAcross = 1024;
nSegments = 2;

// Modules

// Sensor
comp = Sensor
M SenSi 0 0 0 0.4 mm L ;

// Hybrid
comp = Hybrid
M G10 0 2.36 g 0 0 L ;
M Cu 0 2.70 g 0 0 L ;

// NaIS 0.097 Cu 0.197 PE a 16 pin pair
// Four pairs
comp = NaIS
M Cu 0 0.8 0 0 L ;
M G10 0 1.6 0 0 L ;

// ASICs
comp = ASICs
M Si 0 0.08 g 0 0 L ;

// Support strip *2
comp = Support strip
M CF 0 5.48 g 0 0 L ;

// Cooling blocks *2
comp = Cooling blocks
M Al 0 9.06 g 0 0 L ;

// GBTs (1 in 10x10)
comp = GBTs
M G10 0 0 0 2.73 g L; // PCB
M Cu 0 0 0 0.55 g L;  // PCB
M PE 0 0 0 2.75 g L;  // Packaging
M Cu 0 0 0 0.38 g L;  // 1 Coil (DC/DC)
M Al 0 0 0 2.27 g L;  // Cooling

comp = DC/DC
// Converter PCB 1 / module
M G10 0 0.91 g 0 0 L ;
M Cu 0 0.22 g 0 0 L ;
// Coil / module
M Cu 0 0.38 g 0 0 L ;
M Al 0 2.27 g 0 0 L ;

// All services below calculated over 100 mm length = 1 module

// 6 TWP/rods
// (4 for sensors and 2 for converters)
comp = Twisted pairs
M Cu 0 0 0 0.198 g E;
M PE 0 0 0 0.12 g E;
M Al 0 0 0 0.198 g E;

// Power for the converter (10V)
// 4 wires/ module
comp = Power lines
M Cu_MV 0.236 g 0 0 0 E; // 2 wires (GBT)
M PE 0.192 g 0 0 0 E;
M Cu_MV 0.236 g 0 0 0 E; // 2 wires (Hybrids)
M PE 0.192 g 0 0 0 E;

// 1 wire/module (HV)
comp = HV lines
M Cu_HV 0 0 0.118 g 0 E;
M PE 0 0 0.096 g 0 E;

// Cooling
comp = Cooling
M Steel 0 0 0 0.79 g E;
M CO2 0 0 0 0.18 g E;

// Fibers 4 fibers per module
comp = Fibers
M PE 0 0 0.15 g 0 E; // 2 fibers

//Mechanics
comp = Mechanics
M CF 0 0 0 7.62 g L;
M PE 0 0 0 0.58 g L;

// I acknowledge that there are
// no GBTs at the end of the rod
comp = Twisted pairs
M Cu_twp 0 0 0 0 E;
// pt module 10x10 for the outer region
// GBT on the module

// Formula A(nxm)(p-1) + B(nxm) + C(p-1) + D
// Material A B C D
// Final label: L = Local material, E = service Exiting the detector

// TODO:
// Put the right material here
// For a 4.2 x 10.2 cm^2 sensor
// which is 1024 channels * 2 nominally

// Module type
type = ptMixed

// Default sensor:
nStripsAcross = 1024;
nSegments = 2;

// Modules

// Sensor
comp = Sensor
M SenSi 0 0 0 0.4 mm L ;

// Hybrid
comp = Hybrid
M G10 0 2.36 g 0 0 L ;
M Cu 0 2.70 g 0 0 L ;

// NaIS 0.097 Cu 0.197 PE a 16 pin pair
// Four pairs
comp = NaIS
M Cu 0 0.8 0 0 L ;
M G10 0 1.6 0 0 L ;

// ASICs
comp = ASICs
M Si 0 0.08 g 0 0 L ;
M Si 0 0 0 0.2 mm L ;

// Support strip * 2
comp = Support plate 
M CF 0 0 0 1.2 mm L ;

// Cooling blocks * 2
comp = Cooling blocks
M Al 0 9.06 g 0 0 L ;

// GBTs (1 in 5x10)
comp = GBTs
M G10 0 2.73 g 0 0 L;  // PCB
M Cu  0 0.55 g 0 0 L;  // PCB
M PE  0 2.75 g 0 0 L;  // Packaging
M Cu  0 0.38 g 0 0 L;  // 1 Coil (DC/DC)
M Al  0 2.27 g 0 0 L;  // Cooling

comp = DC/DC
// Converter PCB 1 / module
M G10 0 0.91 g 0 0 L ;
M Cu 0 0.22 g 0 0 L ;
// Coil / module
M Cu 0 0.38 g 0 0 L ;
M Al 0 2.27 g 0 0 L ;

// All services below calculated over 50 mm length = 1 module
// Should scale for longer modules with the number of segments

// 6 TWP/rods
// (4 for sensors and 2 for converters)
comp = Twisted pairs
M Cu 0 0.099 g 0 0 E;
M PE 0 0.06  g 0 0 E;
M Al 0 0.099 g 0 0 E;

// Power for the converter (10V)
// 4 wires/ module
comp = Power lines
M Cu_MV 0.118 g 0 0 0 E; // 2 wires (GBT)
M PE    0.096 g 0 0 0 E;
M Cu_MV 0.118 g 0 0 0 E; // 2 wires (Hybrids)
M PE    0.096 g 0 0 0 E;

// 1 wire/module (HV)
comp = HV lines
M Cu_HV 0.059 g 0 0 0 E;
M PE    0.048 g 0 0 0 E;

// Cooling
comp = Cooling
M Steel 0 0.40 g 0 0 E;
M CO2   0 0.09 g 0 0 E;

// Fibers 4 fibers per module
comp = Fibers
M PE 0.07 g 0 0 0 E; // 2 fibers

//Mechanics
comp = Mechanics
M CF 0 3.81 g 0 0 L;
M PE 0 0.29 g 0 0 L;

// I acknowledge that there are
// no GBTs at the end of the rod
comp = Twisted pairs
M Cu_twp 0 0 0 0 E;
